<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Capsera - Idea Submission Platform</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <meta name="theme-color" content="#f9bd45">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Navigation -->
    <nav class="nav-tabs">
      <button class="nav-tab active" data-screen="ideas" data-ui-key="Ideas">
        Ideas
      </button>
      <button class="nav-tab" data-screen="submissions" data-ui-key="My Submissions">
        My Submissions  
      </button>
      <button class="nav-tab" data-screen="submit" data-ui-key="Submit Ideas">
        Submit Ideas
      </button>
      <button class="nav-tab" data-screen="settings" data-ui-key="Settings">
        Settings
      </button>
    </nav>

    <!-- Screen 1: Ideas List -->
    <div id="ideas-screen" class="screen active">
      <h2 data-ui-key="Ideas">Ideas</h2>
      <div id="ideas-list">
        <div class="loading" data-ui-key="Loading...">Loading...</div>
      </div>
    </div>

    <!-- Screen 2: My Submissions - Compact Design -->
    <div id="submissions-screen" class="screen">
      <h2 data-ui-key="My Submissions">My Submissions</h2>
      <div id="submissions-list">
        <div class="loading" data-ui-key="Loading...">Loading...</div>
      </div>
    </div>

    <!-- Screen 3: Submit Ideas - Dynamic Forms -->
    <div id="submit-screen" class="screen">
      <div id="greeting-section" class="greeting-section">
        <h2 id="greeting-text">Hey there! Ready to share your idea?</h2>
        <div class="info-tip">
          <span class="info-icon">ðŸ’¡</span>
          <span class="info-text">We rate ideas kindly â€” see tips below for better scores!</span>
        </div>
      </div>

      <!-- Cooldown Message -->
      <div id="cooldown-message" class="cooldown-message hidden">
        <div class="cooldown-content">
          <h3>ðŸ•’ Research Time!</h3>
          <p>Please conduct customer interviews and market research.</p>
          <p><strong>Next submission available in: <span id="cooldown-days"></span> days</strong></p>
          <div class="cooldown-tips">
            <strong>Suggested activities:</strong>
            <ul>
              <li>Interview 5-10 potential customers</li>
              <li>Research existing competitors thoroughly</li>
              <li>Create a basic prototype or mockup</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- User and Project Selection -->
      <div class="user-project-selection">
        <div class="form-group">
          <label class="form-label">Who are you?</label>
          <select id="user-select" class="form-select">
            <option value="">Select User</option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label">Which project?</label>
          <select id="project-select" class="form-select">
            <option value="">Select Project</option>
          </select>
        </div>
      </div>

      <!-- Draft Selection for Final Submission -->
      <div id="draft-sidebar" class="draft-sidebar hidden">
        <div class="sidebar-content">
          <h4>Previous Drafts</h4>
          <div id="draft-selector">
            <!-- Populated by JS -->
          </div>
          <div id="draft-preview">
            <!-- Selected draft content -->
          </div>
        </div>
      </div>

      <!-- Main Form -->
      <div id="main-form-container" class="main-form-container">
        <form id="submit-form">
          <!-- Draft 1: Core Questions -->
          <div id="draft-1-questions" class="draft-questions">
            <div class="section-header">
              <h3>Tell us about your idea</h3>
            </div>

            <!-- Customer Profile -->
            <div class="form-group">
              <label class="form-label">
                Who would love this? <span class="field-required">*</span>
              </label>
              <div class="input-with-icon">
                <textarea id="ideal_customer_profile" name="ideal_customer_profile" 
                         class="form-textarea auto-expand" 
                         placeholder="Describe your target customers - their age, job, daily problems they face..."></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    Think specific! Instead of "everyone", describe who would use this daily - their demographics, pain points, and current behavior.
                  </span>
                </span>
              </div>
              <div id="ideal_customer_profile-count" class="word-counter">0 words (10-200)</div>
            </div>

            <!-- Product Idea -->
            <div class="form-group">
              <label class="form-label">
                What's your solution? <span class="field-required">*</span>
              </label>
              <div class="input-with-icon">
                <textarea id="product_idea" name="product_idea" 
                         class="form-textarea auto-expand" 
                         placeholder="Explain your product idea clearly - what does it do and how does it help people?"></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    Focus on the value! Explain what your product does and why people would choose it over existing options.
                  </span>
                </span>
              </div>
              <div id="product_idea-count" class="word-counter">0 words (15-300)</div>
            </div>

            <!-- Pain Points -->
            <div class="form-group">
              <label class="form-label">
                What problems does this solve? <span class="field-required">*</span>
              </label>
              <div class="input-with-icon">
                <textarea id="pain_points" name="pain_points" 
                         class="form-textarea auto-expand" 
                         placeholder="What specific problems or frustrations do your target customers experience?"></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    Be specific about the pain! Describe real problems that keep your customers up at night or waste their time.
                  </span>
                </span>
              </div>
              <div id="pain_points-count" class="word-counter">0 words (15-250)</div>
            </div>

            <!-- Alternatives -->
            <div class="form-group">
              <label class="form-label">
                What alternatives exist? <span class="field-required">*</span>
              </label>
              <div class="input-with-icon">
                <textarea id="alternatives" name="alternatives" 
                         class="form-textarea auto-expand" 
                         placeholder="What similar products or solutions already exist? How is yours different?"></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    Know your competition! List existing solutions and explain why yours is better or different.
                  </span>
                </span>
              </div>
              <div id="alternatives-count" class="word-counter">0 words (5-200)</div>
            </div>

            <!-- Category -->
            <div class="form-group">
              <label class="form-label">
                Categories <span class="optional">(Hold CTRL to select multiple)</span>
              </label>
              <select id="category" name="category" class="form-select" multiple>
                <option value="Technology">Technology</option>
                <option value="Healthcare">Healthcare</option>
                <option value="Education">Education</option>
                <option value="Finance">Finance</option>
                <option value="Entertainment">Entertainment</option>
                <option value="Food & Beverage">Food & Beverage</option>
                <option value="Transportation">Transportation</option>
                <option value="Communication">Communication</option>
                <option value="Productivity">Productivity</option>
                <option value="Social Impact">Social Impact</option>
                <option value="E-commerce">E-commerce</option>
                <option value="Gaming">Gaming</option>
                <option value="Travel">Travel</option>
                <option value="Fitness & Wellness">Fitness & Wellness</option>
                <option value="Environment">Environment</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <!-- Heard About -->
            <div class="form-group">
              <label class="form-label">
                How did you find us? <span class="optional">(Optional)</span>
              </label>
              <select id="heard_about" name="heard_about" class="form-select">
                <option value="">Select...</option>
                <option value="Social Media">Social Media</option>
                <option value="Friend/Family">Friend/Family</option>
                <option value="Search Engine">Search Engine</option>
                <option value="News/Blog">News/Blog</option>
                <option value="Advertisement">Advertisement</option>
                <option value="Event/Conference">Event/Conference</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>

          <!-- Draft 2: Market Research Questions -->
          <div id="draft-2-questions" class="draft-questions hidden">
            <div class="section-header">
              <h3>Let's talk market research</h3>
              <p class="section-subtitle">Time to validate your idea with real data!</p>
            </div>

            <div class="form-group">
              <label class="form-label">
                Did you talk to potential customers? <span class="field-required">*</span>
              </label>
              <div class="input-with-icon">
                <textarea id="market_validation" name="market_validation" 
                         class="form-textarea auto-expand" 
                         placeholder="Describe your customer interviews, surveys, or other validation methods. What did you learn?"></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    Customer interviews are gold! Describe who you talked to, what questions you asked, and what surprised you.
                  </span>
                </span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                How deep did you research competitors? <span class="field-required">*</span>
              </label>
              <div class="input-with-icon">
                <textarea id="competitor_research" name="competitor_research" 
                         class="form-textarea auto-expand" 
                         placeholder="List competitors you found, their strengths/weaknesses, and how you'll differentiate. Include links if helpful."></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    Know thy enemy! List direct and indirect competitors, analyze their pricing, features, and customer reviews.
                  </span>
                </span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                Did you build an MVP or prototype?
              </label>
              <div class="input-with-icon">
                <textarea id="mvp_development" name="mvp_development" 
                         class="form-textarea auto-expand" 
                         placeholder="Describe your MVP/prototype, or explain why you haven't built one yet. No judgment - we want to understand your approach!"></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    MVPs can be simple! Even a landing page, mockup, or manual process counts as validation.
                  </span>
                </span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                Got photos of your product? <span class="optional">(Optional for physical products)</span>
              </label>
              <input type="file" id="product_photo" name="product_photo" 
                     class="form-file" accept="image/*">
              <div class="file-hint">Upload a photo if you have a physical prototype or mockup</div>
            </div>
          </div>

          <!-- Draft 3: Final Pitch -->
          <div id="draft-3-questions" class="draft-questions hidden">
            <div class="section-header">
              <h3>Final pitch time!</h3>
              <p class="section-subtitle">Show us you're ready to make this happen</p>
            </div>

            <div class="pitch-example">
              <h4>ðŸ’¼ Example Investor Pitch:</h4>
              <div class="example-text">
                "We're building TaskMaster, a project management tool for small creative agencies. Unlike complex tools like Monday.com, TaskMaster focuses on visual workflows that designers actually want to use. We've interviewed 50+ agency owners who spend 2+ hours daily on project coordination. Our beta has 200 users with 40% weekly retention. Seeking $50K to hire a developer and reach 1000+ users in 6 months."
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                Your investor pitch <span class="field-required">*</span>
              </label>
              <div class="input-with-icon">
                <textarea id="investor_pitch" name="investor_pitch" 
                         class="form-textarea auto-expand" 
                         placeholder="Write your 30-second elevator pitch. What's the opportunity, your solution, early traction, and what you need?"></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    Make it punchy! Problem â†’ Solution â†’ Traction â†’ Ask. Keep it under 100 words but pack in the key details.
                  </span>
                </span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                What research have you done since last time?
              </label>
              <div class="input-with-icon">
                <textarea id="additional_research" name="additional_research" 
                         class="form-textarea auto-expand" 
                         placeholder="Describe any additional customer interviews, market analysis, or validation work you've completed."></textarea>
                <span class="tooltip-icon">ðŸ’¡
                  <span class="tooltip-text">
                    Show your progress! We love seeing continuous learning and iteration based on customer feedback.
                  </span>
                </span>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">
                MVP or demo link <span class="optional">(Optional)</span>
              </label>
              <input type="url" id="mvp_link" name="mvp_link" 
                     class="form-input" 
                     placeholder="https://your-demo.com">
              <div class="file-hint">Share a link to your working prototype, demo, or landing page</div>
            </div>
          </div>

          <button type="submit" class="btn btn-primary" id="submit-button">
            Submit Draft 1
          </button>
        </form>
      </div>
    </div>

    <!-- Screen 4: Settings -->
    <div id="settings-screen" class="screen">
      <h2 data-ui-key="Settings">Settings</h2>

      <!-- Language Selection -->
      <div class="settings-section">
        <h3 data-ui-key="Choose language">Choose Language</h3>
        <div id="language-selector" class="language-selector">
          <!-- Language options populated by JS -->
        </div>
      </div>

      <!-- Users Management -->
      <div class="settings-section">
        <h3>Users</h3>
        <div id="users-list">
          <div class="loading" data-ui-key="Loading...">Loading...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Overlay Template -->
  <style>
    /* Enhanced modal and compact styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      padding: 3%;
      border-radius: 8px;
      max-width: 85%;
      max-height: 85%;
      overflow-y: auto;
      position: relative;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2%;
      padding-bottom: 1%;
      border-bottom: 1px solid var(--capsera-border);
    }

    .modal-header h3 {
      margin: 0;
      color: var(--capsera-deep);
    }

    .modal-header button {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--capsera-deep);
    }

    .modal-body {
      line-height: 1.6;
    }
  </style>

  <!-- Scripts -->
  <script>
    window.ENV = {
      SUPABASE_URL: "https://cboescovlebokpnrsnwp.supabase.co",
      SUPABASE_ANON_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNib2VzY292bGVib2twbnJzbndwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxMjc0ODAsImV4cCI6MjA3MDcwMzQ4MH0.2mrbRIp7A14hRs_mz37sPshZOrmt0uT9UsM0JWRSvx0",
      EUREKA: true,
      EDGE_FUNCTION_URL: "https://cboescovlebokpnrsnwp.supabase.co/functions/v1",
      DRAFT_COOLDOWN_DAYS: 7 // Configurable cooldown period
    };
  </script>
  <script type="module" src="app.js"></script>
</body>
</html>
